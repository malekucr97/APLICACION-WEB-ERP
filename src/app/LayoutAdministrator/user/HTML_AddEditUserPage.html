<main>
    <article class="articulo">
      <div class="articulo__contenedor mat-elevation-z4">
        <!-- HEADER -->
        <section>
          <div class="articulo__contenedor__header">
            <div class="articulo__contenedor__header__prev">
              <p *ngIf="updateUser">Parámetros del Usuario: {{usuarioSeleccionado.nombreCompleto}}</p>
              <p *ngIf="addUser">Registro de Usuarios</p>
              <a routerLink="{{ URLRedirectPage }}" class="btn btn-light mb-2 mr-3">Volver</a>
            </div>
  
            <div class="articulo__contenedor__header__next"></div>
          </div>
        </section>
  
        <!-- *************************** -->
        <!-- SECCIÓN FORMULARIO USUARIO  -->
        <!-- *************************** -->
        <section>
          <div class="articulo__contenedor__body">
            <div class="articulo__contenedor__body__prev">
              <div class="articulo__contenedor__body__prev__form">
                <div class="articulo__contenedor__body__prev__form__header p-2">
                  <div class="articulo__contenedor__body__prev__form__header__prev">
                    <p class="articulo__contenedor__body__prev__form__header__titulo">{{tituloBasePantalla}}</p>
                  </div>
  
                  <div class="articulo__contenedor__body__prev__form__header__next">
                    <button *ngIf="updateUser" class="articulo__contenedor__header__prev__btns__warn" mat-flat-button (click)="actualizarUsuario()">Actualizar</button>
                    <button *ngIf="addUser" class="articulo__contenedor__header__prev__btns__ok" mat-flat-button (click)="registrarUsuario()">Registrar</button>
                  </div>
                </div>
  
                <div class="articulo__contenedor__body__prev__form__content p-2">
                  <form [formGroup]="usuarioForm" class="row">

                    <div class="form-group col-md-4">
                      <span for="lblIdentificacionUsuario" class="form-label">Identificación</span>
                      <input formControlName="identificacionUsuario"
                              class="form-control"
                              type="text"
                              id="id_identificacionUsuario"
                              [ngClass]="{'is-invalid': submitFormUsuario && f.identificacionUsuario.errors}"
                              [pattern]="ussPattern" />
                      <div *ngIf="submitFormUsuario && f.identificacionUsuario.errors" class="invalid-feedback">
                        <div *ngIf="f.identificacionUsuario.errors.required">El campo es requerido.</div>
                      </div>

                      <div *ngIf="f.identificacionUsuario.errors?.pattern" class="invalid-feedback">
                        <div style="text-align: center">no cumple con la regla regex de seguridad</div>
                      </div>

                    </div>

                    <div class="form-group col-md-8">
                        <span for="lblNombreCompletoUsuario" class="form-label">Nombre Completo</span>
                        <input
                          maxlength="300"
                          formControlName="nombreCompletoUsuario"
                          class="form-control"
                          type="text"
                          id="id_nombreCompletoUsuario"
                          [ngClass]="{'is-invalid': submitFormUsuario && f.nombreCompletoUsuario.errors}"
                        />
                        <div *ngIf="submitFormUsuario && f.nombreCompletoUsuario.errors" class="invalid-feedback">
                          <div *ngIf="f.nombreCompletoUsuario.errors.required">El campo es requerido.</div>
                        </div>
                    </div>

                    <div class="form-group col-md-4">
                      <span for="lblNumeroTelefonoUsuario" class="form-label">Teléfono</span>
                      <input
                          maxlength="15"
                          formControlName="numeroTelefonoUsuario"
                          class="form-control"
                          type="text"
                          id="id_numeroTelefonoUsuario"
                          [ngClass]="{'is-invalid': submitFormUsuario && f.numeroTelefonoUsuario.errors}"
                      />
                      <div *ngIf="submitFormUsuario && f.numeroTelefonoUsuario.errors" class="invalid-feedback">
                          <div *ngIf="f.numeroTelefonoUsuario.errors.required">El campo es requerido.</div>
                      </div>
                  </div>

                  <!-- [pattern]="emailPattern" -->
                  <div class="form-group col-md-8">
                      <span for="lblCorreoElectronicoUsuario" class="form-label">Correo Electrónico</span>
                      <input  formControlName="correoElectronicoUsuario"
                              class="form-control"
                              type="text"
                              id="id_correoElectronicoUsuario"
                              [ngClass]="{'is-invalid': submitFormUsuario && f.correoElectronicoUsuario.errors}" />

                      <div *ngIf="submitFormUsuario && f.correoElectronicoUsuario.errors" class="invalid-feedback">
                          <div *ngIf="f.correoElectronicoUsuario.errors.required">El campo es requerido.</div>
                      </div>
                      <div *ngIf="f.correoElectronicoUsuario.errors?.pattern" class="invalid-feedback">
                        <div style="text-align: center">no cumple con la regla regex de seguridad</div>
                      </div>
                  </div>

                  <div class="form-group col-md-4">
                    <span for="lblPasswordUsuario" class="form-label">Contraseña</span>
                    <input  formControlName="passwordUsuario"
                            class="form-control"
                            type="password"
                            id="id_passwordUsuario"
                            [ngClass]="{'is-invalid': submitFormUsuario && f.passwordUsuario.errors}"
                            [pattern]="pwdPattern" />

                    <div *ngIf="submitFormUsuario && f.passwordUsuario.errors" class="invalid-feedback">
                        <div *ngIf="f.passwordUsuario.errors.required">El campo es requerido.</div>
                        <div *ngIf="f.passwordUsuario.errors.minlength">La contraseña debe de contener al menos 5 caracteres.</div>
                    </div>
                    <div *ngIf="f.passwordUsuario.errors?.pattern" class="invalid-feedback">
                      <div style="text-align: center">no cumple con la regla regex de seguridad</div>
                    </div>
                </div>

                    <div class="form-group col-md-8">
                        <span for="lblPuestoUsuario" class="form-label">Puesto o Cargo</span>
                        <input
                            maxlength="100"
                            formControlName="puestoUsuario"
                            class="form-control"
                            type="text"
                            id="id_puestoUsuario"
                            [ngClass]="{'is-invalid': submitFormUsuario && f.puestoUsuario.errors}"
                        />
                        <div *ngIf="submitFormUsuario && f.puestoUsuario.errors" class="invalid-feedback">
                            <div *ngIf="f.puestoUsuario.errors.required">El campo es requerido.</div>
                        </div>
                    </div>

                    
                    <div class="form-group col-md-12">
                        <span for="lblRolUsuario" class="form-label">Rol de Usuario</span>
                        <input
                            maxlength="100"
                            formControlName="rolUsuario"
                            class="form-control"
                            type="text"
                            id="id_rolUsuario"
                            [ngClass]="{'is-invalid': submitFormUsuario && f.rolUsuario.errors}"
                        />
                        <div *ngIf="submitFormUsuario && f.rolUsuario.errors" class="invalid-feedback">
                            <div *ngIf="f.rolUsuario.errors.required">El campo es requerido.</div>
                        </div>
                    </div>

                    

                  </form>
                </div>
              </div>
            </div>
          </div>
        </section>
  
        <!-- ************************ -->
        <!-- USUARIO SELECCIONADO     -->
        <!-- ************************ -->
        <section *ngIf="updateUser">
          <div class="articulo__contenedor__body__complete">
            <div class="articulo__contenedor__body__next__list">
              <div class="articulo__contenedor__body__next__list">
                <div class="articulo__contenedor__body__next__list__header">
                  <div class="articulo__contenedor__body__prev__list__header__prev">
                    <p class="articulo__contenedor__body__prev__list__header__titulo">Usuario Seleccionado</p>
                  </div>
  
                  <div class="articulo__contenedor__body__prev__list__header__next"></div>
                </div>
  
                <div class="articulo__contenedor__body__next__list__content">
                  <div>
                    <table class="table table-striped">
                      <thead>
                        <tr>
                            <th style="width: 10%">Identificación</th>
                            <th style="width: 25%">Nombre Completo</th>
                            <th style="width: 25%">Email</th>
                            <th style="width: 20%">Puesto</th>
                            <th style="width: 20%">Rol Asignado</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="item-list__list" (click)="selectObjetoUsuario()" >
                            <td>{{usuarioSeleccionado.identificacion}}</td>
                            <td>{{usuarioSeleccionado.nombreCompleto}}</td>
                            <td>{{usuarioSeleccionado.email}}</td>
                            <td>{{usuarioSeleccionado.puesto}}</td>
                            <td>{{nombreRol}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
  
        <!-- FOOTER -->
        <section>
          <div class="articulo__contenedor__footer">
            <div class="articulo__contenedor__footer__prev"></div>
  
            <div class="articulo__contenedor__footer__next"></div>
          </div>
        </section>
      </div>
    </article>
  </main>