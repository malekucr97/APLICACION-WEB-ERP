<main class="main-modules">

  <div class="contenido-main">
    
    <div>
      <div>
        <p class="contenido-main__h1">{{ moduleName }}</p>
        <p class="contenido-main__h2">Porcentajes de Estimación por Días de Atraso</p>
        <!-- <p class="contenido-main__h2">{{ 'CONFIGURATION.ADMIN_PAGE_LIST_USERS.TITLE' | translate }}</p> -->
      </div>
      <hr>
      <button class="back-ico-one"
              title="{{ 'CONFIGURATION.BTN_ADMIN_USERS' | translate}}"
              mat-icon-button 
              (click)="redirectIndexModule()"> <mat-icon>arrow_back</mat-icon> </button>
    </div>

    <div class="card">  
      <div class="card-body">

        <div>
            <p *ngIf="add" class="contenido-main__h3">Actualización de Rangos</p>
            <p *ngIf="update" class="contenido-main__h3">Registro de Rangos</p>
            <!-- <p *ngIf="add" class="contenido-main__h3">{{ 'CONFIGURATION.ADD_EDIT_USER.PARAMETERS_USER' | translate: { nombreCompleto: objSeleccionado.nombreCompleto } }}</p>
            <p *ngIf="addEntitie" class="contenido-main__h3">{{ 'CONFIGURATION.ADD_EDIT_USER.REGISTER_USER' | translate }}</p> -->
        </div>

        <hr>

        <!-- *************************** -->
        <!-- SECCIÓN FORMULARIO USUARIO  -->
        <!-- *************************** -->
          
        <div class="formulario-izquierdo">
          <div class="formulario-izquierdo__nav">
            <div class="formulario-izquierdo__nav__prev">
              <p class="formulario-izquierdo__nav__prev__tittle">Parametrización de Rangos</p>
              <!-- <p class="formulario-izquierdo__nav__prev__tittle">{{ 'CONFIGURATION.ADD_EDIT_USER.TITLE' | translate }}</p> -->
            </div>

            <div class="formulario-izquierdo__nav__next">
              <button *ngIf="habilitaBtnNuevo" class="formulario-izquierdo__nav__next__btn-view" 
                    mat-flat-button 
                    (click)="limpiarFormulario()">{{ 'GENERAL.BTN_NEW' | translate }}</button>
            <button *ngIf="habilitaBtnActualiza" class="formulario-izquierdo__nav__next__btn-warn" 
                    mat-flat-button 
                    (click)="actualizar()">{{ 'GENERAL.BTN_UPDATE' | translate }}</button>
            <button *ngIf="habilitaBtnRegistro && existeIdentificadores" class="formulario-izquierdo__nav__next__btn-ok" 
                    mat-flat-button 
                    (click)="registrar()">{{ 'GENERAL.BTN_REGISTER' | translate }}</button>
            <button *ngIf="habilitaBtnEliminar" class="formulario-izquierdo__nav__next__btn-delete" 
                    mat-flat-button 
                    (click)="eliminar()">{{ 'GENERAL.BTN_DELETE' | translate }}</button>
            </div>
          </div>

          <div class="p-2">
            <form [formGroup]="formObject" class="row">


              <div *ngIf="habilitaIdentificador" class="row">
                  <div class="col-sm-6">
                    <label for="id_selectIdentificador" class="form-label">Identificador</label>
                    <!-- <span for="lblIdMoneda" class="form-label">{{ 'MODULES.GENERAL_TIPO_CAMBIO.FORM.Currency' | translate }}</span> -->
                    <select formControlName="identificador" 
                            class="form-control" 
                            name="selectIdentificador"
                            id="id_selectIdentificador"
                            [ngClass]="{ 'is-invalid': submitForm && f.identificador.errors }"
                            (change)="onIdentificadorChange()">
                            <option [disabled]="false" 
                                    [ngValue]="objeto" 
                                    *ngFor="let objeto of listIdentificadores" >{{objeto.identificador}}</option>
                    </select>
                    <div *ngIf="submitForm && f.identificador.errors" class="invalid-feedback">
                        <div *ngIf="f.identificador.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                    </div>
                  </div>

                  <div class="col-sm-6 d-flex justify-content-center mt-3">
                    <button class="formulario-izquierdo__nav__next__btn-view" 
                            mat-flat-button 
                            (click)="btnNuevoIdentificador()">
                            Nuevo Identificador
                            <!-- {{ 'GENERAL.BTN_NEW' | translate }} -->
                          </button>
                  </div>
              </div>

              <div *ngIf="habilitaRegistroIdentificador" class="row">
                  <div class="col-sm-6">
                    <label for="id_nuevoIdentificador" class="form-label">Nuevo Identificador</label>
                    <input  #nuevoIdentificador
                            maxlength="200"
                            class="form-control"
                            type="text"
                            id="id_nuevoIdentificador"/>
                  </div>
                  <div class="col-sm-6 d-flex justify-content-center mt-3">
                    <button mat-flat-button 
                            (click)="registrarIdentificador()">
                            Registrar Identificador
                            <!-- {{ 'GENERAL.BTN_REGISTER' | translate }} -->
                    </button>
                  </div>
              </div>


              <!-- campos -->

              <div *ngIf="existeIdentificadores" class="row">

                <div class="col-sm-6">
                  <span for="lblDescripcion" class="form-label">Descripción</span>
                  <!-- <span for="lblNombreEntidad" class="form-label">{{ 'CONFIGURATION.ADD_EDIT_USER.FORM.TXT_USERNAME' | translate }}</span> -->
                  <input  maxlength="200"
                          formControlName="descripcion"
                          class="form-control"
                          type="text"
                          id="id_descripcion"
                          [ngClass]="{'is-invalid': submitForm && f.descripcion.errors}"
                          />
                  <div *ngIf="submitForm && f.descripcion.errors" class="invalid-feedback">
                    <div *ngIf="f.descripcion.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                  </div>
                </div>

                <div class="col-sm-6"></div>

                <div class="col-sm-6">
                  <span for="lblInicio" class="form-label">Inicio</span>
                  <!-- <span for="lblNombreEntidad" class="form-label">{{ 'CONFIGURATION.ADD_EDIT_USER.FORM.TXT_USERNAME' | translate }}</span> -->
                  <input  formControlName="inicio"
                          class="form-control"
                          type="number"
                          id="id_inicio"
                          [ngClass]="{'is-invalid': submitForm && f.inicio.errors}" />
                  <div *ngIf="submitForm && f.inicio.errors" class="invalid-feedback">
                    <div *ngIf="f.inicio.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <span for="lblFin" class="form-label">Fin</span>
                  <!-- <span for="lblNombreEntidad" class="form-label">{{ 'CONFIGURATION.ADD_EDIT_USER.FORM.TXT_USERNAME' | translate }}</span> -->
                  <input  formControlName="fin"
                          class="form-control"
                          type="number"
                          id="id_fin"
                          [ngClass]="{'is-invalid': submitForm && f.fin.errors}" />
                  <div *ngIf="submitForm && f.fin.errors" class="invalid-feedback">
                    <div *ngIf="f.fin.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <span for="lblPorcentajeEstimacion" class="form-label">Porcentaje Estimación</span>
                  <!-- <span for="lblNombreEntidad" class="form-label">{{ 'CONFIGURATION.ADD_EDIT_USER.FORM.TXT_USERNAME' | translate }}</span> -->
                  <input  formControlName="porcentajeEstimacion"
                          class="form-control"
                          type="number"
                          id="id_porcentajeEstimacion"
                          [ngClass]="{'is-invalid': submitForm && f.porcentajeEstimacion.errors}" />
                  <div *ngIf="submitForm && f.porcentajeEstimacion.errors" class="invalid-feedback">
                    <div *ngIf="f.porcentajeEstimacion.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <span for="lblNivel" class="form-label">Nivel</span>
                  <!-- <span for="lblNombreEntidad" class="form-label">{{ 'CONFIGURATION.ADD_EDIT_USER.FORM.TXT_USERNAME' | translate }}</span> -->
                  <input  formControlName="nivel"
                          class="form-control"
                          type="number"
                          id="id_nivel"
                          [ngClass]="{'is-invalid': submitForm && f.nivel.errors}" />
                  <div *ngIf="submitForm && f.nivel.errors" class="invalid-feedback">
                    <div *ngIf="f.nivel.errors.required">{{ 'GENERAL.VALIDATES.EMPTY' | translate }}</div>
                  </div>
                </div>

              </div>

              

            </form>
          </div>
        </div>

        <!-- ************************ -->
        <!-- USUARIO SELECCIONADO     -->
        <!-- ************************ -->
              
        <div *ngIf="mostrarLista" class="contenido-main__table">
          <br>
          <table class="table table-striped">
            <thead>
              <tr>
                  <!-- <th class="contenido-main__table__aeup-id">{{ 'CONFIGURATION.ADD_EDIT_USER.TABLE.ID' | translate }}</th>
                  <th class="contenido-main__table__aeup-name">{{ 'CONFIGURATION.ADD_EDIT_USER.TABLE.USERNAME' | translate }}</th>
                  <th class="contenido-main__table__aeup-email">{{ 'CONFIGURATION.ADD_EDIT_USER.TABLE.EMAIL' | translate }}</th>
                  <th class="contenido-main__table__aeup-position">{{ 'CONFIGURATION.ADD_EDIT_USER.TABLE.POSITION' | translate }}</th>
                  <th class="contenido-main__table__aeup-role">{{ 'CONFIGURATION.ADD_EDIT_USER.TABLE.ROLE' | translate }}</th> -->

                  <th class="contenido-main__table__rped-ico-edit"></th>

                  <th class="contenido-main__table__rped-desc">Descripción</th>
                  <th class="contenido-main__table__rped-inicio">Inicio</th>
                  <th class="contenido-main__table__rped-fin">Fin</th>
                  <th class="contenido-main__table__rped-pest">Porc. Estimación</th>
                  <th class="contenido-main__table__rped-nivel">Nivel</th>
                  <th class="contenido-main__table__rped-ident">Identificador</th>
                  
                  <th class="contenido-main__table__rped-registra">Registra</th>
                  <th class="contenido-main__table__rped-fecha-r">Fecha</th>
                  <th class="contenido-main__table__rped-modifica">Modifica</th>
                  <th class="contenido-main__table__rped-fecha-m">Fecha</th>
              </tr>
            </thead>
            <tbody>

              <tr *ngFor="let obj of listRangosCompania" (click)="seleccionarObjeto(obj)">
        
                <td class="item-list-edit"> <a> <mat-icon>edit</mat-icon> </a> </td>
                <td class="item-list-edit contenido-main__table__rped-desc__td" >{{obj.descripcion}}</td>
                <td class="item-list-edit contenido-main__table__rped-inicio__td" >{{obj.inicio}}</td>
                <td class="item-list-edit contenido-main__table__rped-fin__td" >{{obj.fin}}</td>
                <td class="item-list-edit contenido-main__table__rped-pest__td" >{{obj.porcentajeEstimacion}}</td>
                <td class="item-list-edit contenido-main__table__rped-nivel__td" >{{obj.nivel}}</td>
                <td class="item-list-edit contenido-main__table__rped-ident__td" >{{obj.identificador}}</td>
                <td class="item-list-edit contenido-main__table__rped-registra__td" >{{obj.adicionadoPor}}</td>
                <td class="item-list-edit contenido-main__table__rped-fecha-r__td" >{{obj.fechaAdicion | date:'dd/MM/yyyy'}}</td>
                <td class="item-list-edit contenido-main__table__rped-modifica__td" >{{obj.modificadoPor}}</td>
                <td class="item-list-edit contenido-main__table__rped-fecha-m__td" >{{obj.fechaModificacion | date:'dd/MM/yyyy'}}</td>

              </tr>

            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

</main>